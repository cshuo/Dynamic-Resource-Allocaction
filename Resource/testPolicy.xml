<PolicyGroup name = "group1">

<Policy name = "policy1" target = "arbiterPMA">

	<rule name = "new_vm">
        (defrule new_vm
        (newVM cpubound vmInfo)
        =>
        (bind ?hosts (python-call Host_CpuUtil_Filter))
        (printout stdout ?hosts crlf))
    </rule>

    <rule name = "migrate_0">
        (defrule migrate_0
        (violation host ?host_id ?resource upperBound ?value)
        =>
        (bind ?vms (python-call Get_VMs_On_Host ?host_id))
        (bind ?vm (python-call VM_CpuUtil_Cost ?vms))
        (bind ?hosts (python-call Host_CpuUtil_Filter))
        (bind ?destHost (python-call Host_CpuUtil_Cost ?hosts))
        (python-call Migrate ?vm ?destHost))
    </rule>


</Policy>

<Policy name = "policy2" target = "monitorPMA">
    <rule name = "collect_0">
        (defrule collect_0
        (collect host ?host_id ?resource)
        =>
        (bind ?value (python-call Get_Host_Resource ?host_id ?resource))
        (assert (collected host ?host_id ?resource ?value)))
    </rule>

    <rule name = "upperBound_0">
        (defrule upperBound_0
        (collected host ?host_id ?resource ?value)
        =>
        (python-call Host_Resource_UpperBound ?host_id ?resource ?value))
    </rule>

</Policy>


</PolicyGroup>